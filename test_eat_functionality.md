# Eat 功能測試清單

## 🎯 重構後的改進

### ✅ **統一功能**
- **一般指令** (`?eat`) 和 **斜線指令** (`/eat`) 現在功能完全一致
- 兩種指令都支援完整的按鈕交互功能

### ✅ **新功能特色**
1. **無參數使用** (`?eat` 或 `/eat`)：
   - 顯示分類選擇按鈕
   - 點擊分類後進入餐點推薦界面

2. **有參數使用** (`?eat 主餐` 或 `/eat category:主餐`)：
   - 直接顯示該分類的隨機餐點
   - **新增：包含「換一個」和「回分類列表」按鈕**

3. **按鈕功能**：
   - 🔄 **換一個**：重新隨機選擇同分類餐點
   - 📋 **回分類列表**：返回分類選擇界面
   - ⏰ **超時處理**：60秒後按鈕變灰並顯示超時訊息

## 🧪 測試項目

### 基本功能測試
- [ ] `?eat` - 顯示分類選擇
- [ ] `/eat` - 顯示分類選擇
- [ ] `?eat 主餐` - 直接推薦主餐（帶按鈕）
- [ ] `/eat category:主餐` - 直接推薦主餐（帶按鈕）

### 按鈕交互測試
- [ ] 點擊分類按鈕 → 顯示餐點推薦
- [ ] 點擊「換一個」→ 同分類重新推薦
- [ ] 點擊「回分類列表」→ 返回分類選擇
- [ ] 超時機制 → 60秒後按鈕變灰

### 錯誤處理測試
- [ ] `?eat 不存在的分類` - 顯示錯誤訊息
- [ ] `/eat category:不存在的分類` - 顯示錯誤訊息
- [ ] 空的分類資料 - 顯示無分類訊息

### 權限測試
- [ ] 其他用戶點擊按鈕 → 顯示權限錯誤

## 📊 架構改進

### 程式碼統一
- 新增 `_handle_eat_command()` 統一處理邏輯
- 分離 `_show_category_selection()` 和 `_show_dish_recommendation()`
- 改善錯誤處理和日誌記錄

### 維護性提升
- 減少重複代碼
- 統一錯誤處理機制
- 更清晰的函數分離

## 🔧 使用指南

### 開發者測試流程
```bash
?rl eat          # 重載 eat cog
?synchere        # 同步斜線指令
# 開始測試各項功能
```

### 用戶使用方式
```bash
# 方式1：選擇分類
?eat
/eat

# 方式2：直接指定分類
?eat 主餐
/eat category:主餐
```

## 📈 效果預期

- ✅ 兩種指令行為完全一致
- ✅ 所有情況都有按鈕交互
- ✅ 更好的用戶體驗
- ✅ 更容易維護的代碼