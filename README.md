# Niibot

一個使用 Python 開發的 Discord 機器人

## 🎯 主要功能

### 核心模組
- **分隊系統** (`party.py`) - 智能分隊、語音頻道管理
- **訊息監聽** (`listener.py`) - 自動回覆、關鍵字檢測
- **用餐推薦** (`eat.py`) - 隨機餐點推薦系統
- **繪圖遊戲** (`draw.py`) - 你畫我猜遊戲
- **時鐘系統** (`clock.py`) - 打卡、時間追蹤
- **表情工具** (`emojitool.py`) - 自訂表情符號管理
- **遊戲連結** (`repo.py`) - 遊戲網站快速連結
- **配對遊戲** (`tinder.py`) - 簡單配對功能
- **清理工具** (`clear.py`) - 訊息批量刪除

## 🚀 快速開始

### 安裝依賴
```bash
# 生產環境
pip install -r requirements.txt

# 開發環境
pip install -r requirements-dev.txt
```

### 執行機器人
```bash
python bot.py
```

## 🏗️ 架構設計

### 配置系統
- **本地開發**: `config_local.py` (使用 .env 檔案)
- **生產環境**: `config_prod.py` (使用環境變數)
- **統一管理**: `utils/config_manager.py` (單例模式)

### 模組化架構
- **動態載入**: 所有 cog 自動從 `cogs/` 目錄載入
- **熱重載**: 支援 `?l`, `?u`, `?rl` 指令動態管理模組
- **事件分發**: 集中式訊息處理系統

### 資料儲存
- **JSON 格式**: `data/` 目錄存放所有配置資料
- **非同步 I/O**: 高效能檔案操作
- **錯誤處理**: 完整的異常處理機制

## 📋 Todo

### 短期目標
- [ ] **Tinder 模組完善** - 目前只有基礎 embed 顯示
- [ ] **Repo 功能擴展** - 遊戲準心代碼資料庫
- [ ] **Twitch 整合** - 直播通知功能

### Repo 功能構想
設計一個智能資料庫查詢系統，根據使用者提示回傳相關內容：

**預計內容：**
- 🎯 **遊戲準心代碼** + 預覽圖片
- 🔗 **Discord 伺服器邀請連結**
- 🎮 **遊戲設定檔案分享**

**技術實現：**
- 使用 Discord Embed + View 組件
- 支援圖片預覽和檔案下載
- 關鍵字搜尋和分類瀏覽

## 🔧 開發指南

### 環境配置
```bash
# 設定環境變數
BOT_ENV=local  # 或 prod

# 必要的環境變數
TOKEN=your_discord_bot_token
COMMAND_PREFIX=["?"]
```

### 代碼品質
- 使用 `black` 進行代碼格式化
- 使用 `flake8` 進行代碼檢查
- 遵循 PEP 8 編碼規範

### 部署須知
- Python 版本：見 `runtime.txt`
- 支援 Render、Railway 等平台
- 自動埠號分配
- 健康檢查端點

## 📊 系統特色

### 🎮 遊戲整合
- **Board Game Arena** - 線上桌遊平台
- **CodeNames** - 代號遊戲詞彙庫
- **Gartic Phone** - 你畫我猜遊戲
- **GeoGuessr** - 地理位置猜測

### 🛠️ 管理工具
- **訊息清理** - 批量刪除指定範圍訊息
- **權限控制** - 基於角色的指令權限
- **日誌系統** - 完整的操作記錄

### 🎯 用戶體驗
- **中文介面** - 完全繁體中文操作
- **直觀指令** - 簡單易記的指令設計
- **錯誤提示** - 友善的錯誤訊息和使用提示

## 📈 技術亮點

- **異步架構** - 全面採用 async/await 模式
- **模組化設計** - 鬆耦合的 cog 系統
- **配置管理** - 環境分離的配置系統
- **錯誤處理** - 完善的異常處理機制
- **日誌記錄** - 多級別日誌輸出
- **動態管理** - 運行時模組熱載入

---

**開發團隊**: yPinn  
**技術棧**: Python 3.x, discord.py, asyncio  
**部署**: 支援多種雲端平台